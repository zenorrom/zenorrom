name: ZenorOS Build Only

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v3

    - name: Set up build environment
      run: |
        sudo apt-get update
        sudo apt-get install -y bc bison build-essential curl flex git gnupg gperf \
        libncurses5-dev libssl-dev repo unzip zip zlib1g-dev openjdk-11-jdk python2

    - name: Build ROM
      run: |
        cd rom  # تأكد إن ملفات السورس داخل مجلد rom
        source build/envsetup.sh
        lunch aosp_arm64_ab-userdebug  # ❗ غيّر حسب جهازك
        make bacon -j2 || make otapackage -j2
